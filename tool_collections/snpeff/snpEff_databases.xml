<tool id="snpEff_databases" name="SnpEff databases:" version="@WRAPPER_VERSION@.1">
    <description> list available databases</description>
    <macros>
        <import>snpEff_macros.xml</import>
    </macros>
    <requirements>
        <expand macro="requirement" />
    </requirements>
    <expand macro="stdio" />
    <expand macro="version_command" />
    <command><![CDATA[

        snpEff databases | grep -v '^---' | sed 's/^Genome/#Genome/' | sed 's/  *//g' 

        #if $include_pattern:
             | grep '${include_pattern}' 
        #end if

        #if $exclude_pattern:
             | grep -v '${exclude_pattern}' 
        #end if

        > '${snpeff_dbs}'
            
    ]]></command>
    <inputs>
        <param name="include_pattern" size="40" type="text" value="" optional="True" label="List entries matching the following expression" help="Databases matching this expression will be listed. Here you can enter text or regular expression. For example, to show only mouse databases use 'mouse'">
            <sanitizer>
                <valid initial="string.printable">
                    <remove value="&apos;"/>
                </valid>
                <mapping initial="none">
                    <add source="&apos;" target="__sq__"/>
                </mapping>
            </sanitizer>
        </param>
        <param name="exclude_pattern" size="40" type="text" value="" optional="True" label="Do not output entries matching the following expression" help="Databases matching this expression WILL NOT BE listed. Here you can enter text or regular expression. For excample, to avoid all ENSEMBL bundles enter 'ENSEMBL'">
            <sanitizer>
                <valid initial="string.printable">
                    <remove value="&apos;"/>
                </valid>
                <mapping initial="none">
                    <add source="&apos;" target="__sq__"/>
                </mapping>
            </sanitizer>
        </param>

    </inputs>
    <outputs>
        <data format="tabular" name="snpeff_dbs" label="${tool.name} @SNPEFF_VERSION@ available databases" />
    </outputs>
    <tests>
        <test>
            <output name="snpeff_dbs">
                <assert_contents>
                    <has_text text="ebola_zaire" />
                </assert_contents>
            </output>
        </test>
         <test>
            <param name="include_pattern" value="ebola"/>
            <output name="snpeff_dbs">
                <assert_contents>
                    <has_text text="ebola_zaire" />
                </assert_contents>
            </output>
        </test>
    </tests>
    <help><![CDATA[
@EXTERNAL_DOCUMENTATION@
    ]]></help>
    <expand macro="citations" />
</tool>

