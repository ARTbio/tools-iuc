<tool id="snpEff_build_gb" name="Build SnpEff" version="@WRAPPER_VERSION@.1">
    <description>database from Genbank datasets</description>
    <macros>
        <import>snpEff_macros.xml</import>
    </macros>
    <expand macro="requirements" />
    <expand macro="stdio" />
    <expand macro="version_command" />
    <command><![CDATA[
        set PWD = pwd &&

        ## G is just a random directory name to satisfy snpEff desire to read file from a directory
        mkdir G &&

        ln -s '${input_gbk}' G/genes.gbk &&
        
        snpEff -Xmx8g build -v -genbank -configOption 'G.genome=G' -dataDir "\$(pwd)/" G &&

        mv \$(pwd)/G/snpEffectPredictor.bin '${snpeff_output}'
    ]]></command>
    <inputs>
        <param name="input_gbk" type="data" format="genbank,genbank.gz" label="Genbank dataset to build database from" help="This Genbank file will be used to generate snpEff database"/>
    </inputs>
    <outputs>
        <data name="snpeff_output" format="snpeffdb">
            <actions>
                <action name="snpeff_version" type="metadata" default="SnpEff4.3"/>
            </actions>
        </data>
    </outputs>
    <help><![CDATA[
This tool calculate the effect of variants (SNPs/MNPs/Insertions) and deletions.

@EXTERNAL_DOCUMENTATION@
]]>
    </help>
    <expand macro="citations" />
</tool>
