<tool id="graphlan" name="GraPhlAn" version="@WRAPPER_VERSION@.0">
    <description>to produce graphical output of an input tree</description>
    <macros>
        <import>graphlan_macros.xml</import>
    </macros>
    <expand macro="requirements"/>
    <stdio>
        <regex match="Warning"
               source="stderr"
               level="warning"
               description="" />
    </stdio>
    <version_command>graphlan.py -v</version_command>
    <command>
<![CDATA[        
        graphlan.py
            --format '$format'
            #if $dpi
                --dpi '$dpi'
            #end if
            --size '$size'
            #if $pad
                --pad '$pad'
            #end if
            '$input_tree'
            #if str($format) == "png"
                '$png_output_image'
            #else if str($format) == "pdf"
                '$pdf_output_image'
            #else if str($format) == "ps"
                '$ps_output_image'
            #else if str($format) == "eps"
                '$eps_output_image'
            #else
                '$svg_output_image'
            #end if
]]>
    </command>
    <inputs>
        <param name="input_tree" type="data" format="txt,nhx,phyloxml" label="Input tree"/>
        <param argument='--format' type="select" label="Output format">
            <option value="png" selected="true">PNG</option>
            <option value="pdf">PDF</option>
            <option value="ps">PS</option>
            <option value="eps">EPS</option>
            <option value="svg">SVG</option>
        </param>
        <param argument="--dpi" type="integer" label="Dpi of the output image" help="For non vectorial formats" optional="True"/>
        <param argument="--size" type="integer" value="7" label="Size of the output image"/>
        <param argument="--pad" type="integer" label="Distance between the most external graphical element and the border of the image" optional="True"/>
    </inputs>
    <outputs>
        <data format="png" name="png_output_image" label="${tool.name} on ${on_string}: PNG">
            <filter>format=="png"</filter>
        </data>
        <data format="pdf" name="pdf_output_image" label="${tool.name} on ${on_string}: PDF">
            <filter>format=="pdf"</filter>
        </data>
        <data format="ps" name="ps_output_image" label="${tool.name} on ${on_string}: PS">
            <filter>format=="ps"</filter>
        </data>
        <data format="eps" name="eps_output_image" label="${tool.name} on ${on_string}: EPS">
            <filter>format=="eps"</filter>
        </data>
        <data format="svg" name="svg_output_image" label="${tool.name} on ${on_string}: SVG">
            <filter>format=="svg"</filter>
        </data>
    </outputs>
    <tests>
        <test>
            <param name="input_tree" value="intermediary_tree"/>
            <param name="format" value="png"/>
            <param name="dpi" value="100"/>
            <param name="size" value="7"/>
            <param name="pad" value="2"/>
            <output name="png_output_image" file="png_image.png" />
        </test>
    </tests>
    <help><![CDATA[
**What it does**

GraPhlAn is a software tool for producing high-quality circular representations of taxonomic and phylogenetic trees. GraPhlAn focuses on concise, integrative, informative, and publication-ready representations of phylogenetically- and taxonomically-driven investigation.

For more information, check the `user manual <https://bitbucket.org/nsegata/graphlan/overview>`_.

    ]]></help>
    <citations>
    </citations>
</tool>
