<tool id="obitab" name="obitab" version="@WRAPPER_VERSION@">
    <macros>
        <import>macros.xml</import>
    </macros>
    <expand macro="requirements"/>
    <expand macro="stdio"/>

    <command>

        <![CDATA[
        obitab
        #if str( $options_additional_file.options_additional_file_selector ) == "yes"
            --omit-attribute='$options_additional_file.additional_file'
        #end if
        ${output_seq_option}
        ${no_definition_option}
        --${options_inputtype}
        --${options_seqtype}

        '$input' > '$output'
        ]]>

    </command>

    <inputs>
        <param name="input" type="data" format="fastq,fasta,txt,tabular" label="Input sequences file" />
        <param name="output_seq_option" type="boolean" checked="false" truevalue="-o" falsevalue="" label="Did you want to use the output-seq option?" help="Use this option if you want to add an extra column at the end of the table for the sequence itself"/>
        <param name="no_definition_option" type="boolean" checked="false" truevalue="-d" falsevalue="" label="Did you want to use the no-definition option?" help="Use this option if you want to remove column containing the sequence definition in the output tab file"/>
        <conditional name="options_additional_file">
            <param name="options_additional_file_selector" type="select" label="Did you want to use the omit-attribute option?"  help="Use this option if you want to filter attributes whose key is in this list. They will not be printed in the output tab file" >
                <option value="yes">yes</option>
                <option value="no" selected="true">no</option>
            </param>
            <when value="yes">
                <param name="additional_file" type="data" format="tabular" label="attributes key tabular file" />
            </when>
            <when value="no"></when>
        </conditional>
        <param name="options_inputtype" type="select" label="Specify the input datatype">
            <expand macro="inputtype"/>
        </param>
        <param name="options_seqtype" type="select" label="Specify the sequence datatype" >
            <option value="nuc" selected="true">nuc</option>
            <option value="prot">prot</option>
        </param>
    </inputs>
    <outputs>
        <data format="tabular" name="output" label="output.tabular with ${tool.name} on ${on_string}" />
    </outputs>
    <tests>
        <test>
            <param name="input" value="output_obisort.fastq" />
            <conditional name="options_additional_file">
                <param name="options_additional_file_selector" value="no"/>
            </conditional>
            <param name="output_seq_option" value="False"/>
            <param name="no_definition_option" value="True"/>
            <param name="options_inputtype" value="fasta"/>
            <param name="options_seqtype" value="prot"/>
            <output name="output" file="output_obitab.txt" ftype="tabular"/>
        </test>
    </tests>
    <help><![CDATA[


.. class:: infomark

**What it does**

obitab command converts sequence file to a tabular file that can be open by a spreadsheet program or R

@OBITOOLS_LINK@

    ]]>
    </help>
    <expand macro="citation" />
    </tool>
