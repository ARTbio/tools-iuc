<tool id="idba_ud" name="IDBA-UD" version="@IDBA_VERSION@+galaxy1">
    <description>
        Iterative de Bruijn Graph Assembler for data with highly uneven depth
    </description>
    <macros>
        <import>macros.xml</import>
    </macros>
    <expand macro="requirements"/>
    <command detect_errors="aggressive"><![CDATA[
    idba_ud

    @MAIN_INPUT@
    @LEVELS_INPUT@
    @KMER_OPTIONS@
    @FILTER_OPTIONS@
	--min_pairs $min_pairs
	@OTHER_OPTIONS@
	@THREADS@
    ]]></command>

    <inputs>
        <expand macro="main_input"/>
        <expand macro="levels_input"/>
        <expand macro="kmer_options" maxk_default="100" step_default="20"/>
        <expand macro="filter_options"/>
        <expand macro="min_pairs_filter"/>
        <expand macro="other_options">
            <option value="--no_bubble">Do not merge bubble (--no_bubble)</option>
        </expand>
    </inputs>
    <outputs>
        <data name="output" from_work_dir="out/scaffold.fa" format="fasta"/>
    </outputs>
    <tests>
        <test>
            <param name="read" value="merged.fa" ftype="fasta"/>
            <output name="output" file="out/scaffold.fa" ftype="fasta"/>
        </test>
    </tests>
	<expand macro="help" more_help="IDBA-UD is an extension of IDBA algorithm for Short Reads Sequencing data with Highly Uneven Sequencing Depth. IDBA-UD also iterates from small k to a large k. In each iteration, short and low-depth contigs are removed iteratively with cutoff threshold from low to high to reduce the errors in low-depth and high-depth regions. Paired-end reads are aligned to contigs and assembled locally to generate some missing k-mers in low-depth regions. With these technologies, IDBA-UD can iterate k value of de Bruijn graph to a very large value with less gaps and less branches to form long contigs in both low-depth and high-depth regions."/>
	<expand macro="citations">
       <citation type="doi">10.1093/bioinformatics/bts174</citation>
    </expand>
</tool>
