<tool id="nanocompore_db" name="NanoComporeDB" version="0.1.0" python_template_version="3.5">
    <description>Process SampComp results database</description>
    <requirements>
        <requirement type="package">nanocompore</requirement>
    </requirements>
    <command detect_errors="exit_code"><![CDATA[
        python NanocomporeDB_process.py ./out_SampComp.db --ref-fasta reference.fa --annotation-bed annot.bed --out-dir test_sampcomp/plots/
    ]]></command>
    <inputs>
        <param type="data" name="input1" format="fa" />
        <param type="data" name="input2" format="bed" />
        <data name="db" format="tar" label="SampComp Database">
    </inputs>
    <outputs>
        <data name="output1" format="bedgraph" from_work_dir="test-data/DB_out/GMM_logit_pvalue.bedgraph" />
        <data name="output1" format="bedgraph" from_work_dir="test-data/DB_out/KS_dwell_pvalue.bedgraph" />
        <data name="output1" format="bedgraph" from_work_dir="test-data/DB_out/KS_intensity_pvalue.bedgraph" />
    </outputs>
    <tests>
        <test>
            <param name="input1" value="test-data/reference.fa"/>
            <param name="input2" value="test-data/annot.bed"/>
            <param name="db" value="test-data/DB.tar"/>
            <output name="output1" file="test-data/DB_out/GMM_logit_pvalue.bedgraph"/>
            <output name="output1" file="test-data/DB_out/KS_dwell_pvalue.bedgraph"/>
            <output name="output1" file="test-data/DB_out/KS_intensity_pvalue.bedgraph"/>
        </test>
    </tests>
    <help><![CDATA[
usage: NanocomporeDB_process.py [-h] --ref-fasta REF_FASTA [--db-path DB_PATH]
                                [--annotation-bed ANNOTATION_BED]
                                [--pvalue-types PVALUE_TYPES]
                                [--bedgraph BEDGRAPH]
                                [--pvalue-threshold PVALUE_THRESHOLD]
                                [--out-dir OUT_DIR]
NanocomporeDB_process.py: error: the following arguments are required: --ref-fasta

    ]]></help>
</tool>