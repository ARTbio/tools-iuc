<?xml version="1.0"?>
<tool id="transit_hmm" name="HMM" version="@VERSION@+galaxy1">
    <description>- determine essentiality of a genome</description>
    <macros>
        <import>macros.xml</import>
    </macros>
    <expand macro="requirements" />
    <command detect_errors="exit_code"><![CDATA[
    	@LINK_INPUTS@
        transit hmm $input_files annotation.dat transit_out.txt
        @STANDARD_OPTIONS@
        -r $replicates
        $loess
        ]]>
    </command>
    <inputs>
        <expand macro="standard_inputs">
        	<expand macro="replicates" />
            <param name="loess" argument="-l" type="boolean" truevalue="-l" falsevalue="" label="Perform LOESS Correction" help="Helps remove possible genomic position bias." />
        </expand>
    </inputs>
    <outputs>
        <expand macro="outputs">
        	<data name="genes" from_work_dir="transit_out_genes.txt" format="tabular" label="${tool.name} on ${on_string} Genes" />
        </expand>
    </outputs>
    <tests>
        <test>
            <param name="inputs" ftype="wig" value="transit-in1-rep1.wig,transit-in1-rep2.wig" />
            <param name="annotation" ftype="gff3" value="transit-in1.gff3" />
            <output name="sites" file="hmm-sites1.txt" ftype="tabular" />
            <output name="genes" file="hmm-genes1.txt" ftype="tabular" />
        </test>
    </tests>
    <help>
<![CDATA[
The HMM method can be used to determine the essentiality of the entire genome, as opposed to gene-level analysis of the other methods. It is capable of identifying regions that have unusually high or unusually low read counts (i.e. growth advantage or growth defect regions), in addition to the more common categories of essential and non-essential.
]]></help>
    <expand macro="citations" />
</tool>
