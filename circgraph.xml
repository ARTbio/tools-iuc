<tool id="circgraph" name="Make Circos graphics." version="0.1.0">
    <requirements>
        <requirement type="package">circgraph</requirement>
    </requirements>
    <stdio>
        <exit_code range="1:" />
    </stdio>

    <command interpreter="python"><![CDATA[circos-class.py
$genome1
    > $default]]></command>
    <inputs>
	<param name="Image Name" title="Output Filename" type="text" value="circos.svg" help="Set the output filename.">
	</param>
	<param name="Image Background Color" title="Background Color" type="select">
		<option value="default">Select an image background color (Default is white)...</option>
		<option value="black">Black </option>
		<option value="grey">Grey </option>
		<option> </option>
	</param>
	<repeat label="Genome" name="base-sequence" title="Genome">
		<repeat name="ideogram" title="Ideogram">
			<param type="text" value="Ideogram1" help="Create a distinct Circos ideogram"/>
			<param type="select" label="Band Color" name="band_stroke_color">
				<option value="Default"> Select a band color... </option>
			</param>
			<param type="select" label="Band Thickness" name="band_stroke_thickness">
				<option value="Default"> Select a band thickness... </option>
			</param>
			<param type="select" label="Band Transparency" name="band_stroke_transparency">
				<option value="Default"> Select a band transparency... </option>
			</param>
			<repeat name="source-data" title="Data Tracks">
				<param type="data" name="gff3" format="gff3"/>
				<param type="data" name="wig" format="wig"/>
				<param type="data" name="bigwig" format="bigWig"/>
				<param type="data" name="fastA" format="fa"/>
				<conditional name="track-opt" label="Track Selection">
					<param type="select" label="Track Type" name="tracktype">
						<option value="Default"> Select a track type... </option>
						<option value="Heatmap"> Heatmap </option>
						<option value="Scatterplot"> Scatterplot </option>
						<option value="Histogram"> Histogram </option>
					</param>
					<when value="Heatmap">
						<param label="Colorscheme" type="select" name="color">
							<option value="default"> Select a color scheme... </option>
							<option value="Brewer1"> Brewer Palette 1 </option>
							<option value="Brewer2"> Brewer Palette 2 </option>
							<option value="Brewer3"> Brewer Palette 3 </option>
						</param>
					</when>
					<when value="Scatterplot"> </when>
					<when value="Histogram"> 
						<param label="Color" type="select" name="color">
							<option value="default">Select a color... </option>
							<option value="red"> Red </option>
							<option value="orange"> Orange </option>
							<option value="yellow"> Yellow </option>
						</param>
					</when>
				</conditional>
			</repeat>
		</repeat>
	</repeat>
    </inputs>
    <outputs>
	<data format="xml" name="default" label="PreCircos Datadump"/>
    </outputs>
    <help><![CDATA[
        Work in progress...
    ]]></help>
</tool>
